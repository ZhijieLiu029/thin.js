function poplayer(t){var e=document.createElement("popmask");e.style.zIndex=1e3;var a,n=document.createElement("popdialog");if(void 0!==t.width&&(n.style.width=t.width),e.appendChild(n),void 0!==t.header){a=document.createElement("popheader"),$(a).html(t.header);var o=document.createElement("closeicon");o.innerText="âœ•",o.onclick=function(){void 0!==t.onclose&&t.onclose(),$(e).remove()},o.onmouseover=function(){this.style.filter="alpha(opacity=80)",this.style.opacity=".8"},o.onmouseout=function(){this.style.filter="alpha(opacity=50)",this.style.opacity=".5"},a.appendChild(o),n.appendChild(a)}var i=document.createElement("popbody");void 0!==t.height?(i.style.height=t.height,i.style.overflowY="scroll"):(i.style.maxHeight="600px",i.style.overflowY="scroll"),n.appendChild(i),document.body.appendChild(e),void 0!==t.render?t.render({container:i}):$(i).render({data:t.data,template:t.template}),popDrag(a,n)}$(function(){$(document).on("click","tab-nav",function(){$("tab-nav",this.parentElement).removeClass("active"),$(this).addClass("active");var t=this.getAttribute("function");null===t||"[object Function]"===Object.prototype.toString.call(window[t])&&window[t]();var e=this.getAttribute("view");if(null!==e){var a=$(this).parents("multiview:first");$("view",a).removeClass("active"),$("view#"+e,a).addClass("active")}})}),$.fn.extend({render:function(t){function e(t){if("[object Array]"===Object.prototype.toString.call(t.data))for(var e=0;e<t.data.length;e++)a({container:t.container,template:t.template,data:t.data[e]});else a({container:t.container,template:t.template,data:t.data})}function a(t){if("[object Array]"===Object.prototype.toString.call(t.template))for(var e=0;e<t.template.length;e++)n({template:t.template[e],container:t.container,data:t.data});else n({template:t.template,container:t.container,data:t.data})}function n(t){if("[object String]"===Object.prototype.toString.call(t.template)){var e=i({template:t.template,container:t.container}),a=document.createDocumentFragment();$(a).append(e),t.container.appendChild(a)}else if("[object Object]"===Object.prototype.toString.call(t.template))o({container:t.container,template:t.template,data:t.data});else if("[object Function]"===Object.prototype.toString.call(t.template)){var n=l(t.container);t.template({container:t.container,data:n.data_of_thin})}else console.log(Object.prototype.toString.call(t.template))}function o(t){if(void 0!==t.template.datapath&&void 0===t.data){var n=r({container:t.container,path:t.template.datapath});null!==n&&e({container:t.container,data:n,template:t.template})}else{var o;if(o=void 0!==t.template.e?document.createElement(t.template.e):document.createElement("div"),$(t.container).append(o),void 0!==t.data&&(o.data_of_thin=t.data),void 0!==t.template.name&&o.setAttribute("name",t.template.name),void 0!==t.template.options)if("[object Array]"===Object.prototype.toString.call(t.template.options))for(var c=0;c<t.template.options.length;c++)o.options.add(new Option(t.template.options[c]));else if("[object Object]"===Object.prototype.toString.call(t.template.options));else if("[object String]"===Object.prototype.toString.call(t.template.options))for(var p=t.template.options.split(","),d=0;d<p.length;d++)o.options.add(new Option(p[d]));if(void 0!==t.template.selected){var s=i({template:t.template.selected,container:o});$(o).val(s)}void 0!==t.template.click&&(o.onclick=function(){var e=l(this),a={};null!==e&&($("input",e).each(function(t,e){if(void 0!==this.attributes.name){var n=this.attributes.name.value;a[n]=$(this).val()}}),$("select",e).each(function(t,e){if(void 0!==this.attributes.name){var n=this.attributes.name.value;a[n]=$(this).val()}}),$("textarea",e).each(function(t,e){if(void 0!==this.attributes.name){var n=this.attributes.name.value;a[n]=$(this).val()}})),t.template.click({sender:this,org_data:e.data_of_thin,new_data:a})}),void 0!==t.template.event&&Object.keys(t.template.event).forEach(function(e){$(o).on(e,function(e){var a=l(this),n=new Object;$("input",a).each(function(t,e){if(void 0!==this.attributes.name){var a=this.attributes.name.value;n[a]=$(this).val()}}),$("select",a).each(function(t,e){if(void 0!==this.attributes.name){var a=this.attributes.name.value;n[a]=$(this).val()}});var o=e.type;t.template.event[o]({sender:this,type:o,event:e,org_data:a.data_of_thin,new_data:n})})}),void 0!==t.template.t&&a({container:o,template:t.template.t}),void 0!==t.template.a&&Object.keys(t.template.a).forEach(function(e){if("[object Function]"===Object.prototype.toString.call(t.template.a[e])){var a=l(o);o.setAttribute(e,t.template.a[e]({container:o,data:a.data_of_thin}))}else o.setAttribute(e,i({template:t.template.a[e],container:o}))}),void 0!==t.template.style&&Object.keys(t.template.style).forEach(function(e){if("[object Function]"===Object.prototype.toString.call(t.template.style[e])){var a=l(o);o.style.setProperty(e,t.template.style[e]({container:o,data:a.data_of_thin}))}else o.style.setProperty(e,i({template:t.template.style[e],container:o}))})}}function i(t){var e=t.template,a=/\[\[[a-zA-Z0-9\-\.\/_]*\]\]/gi,n=e.replace(a,function(e){for(var a=e.replace("[[","").replace("]]",""),n=a.split("/"),o=l(t.container),i=0;i<n.length;i++)if(".."===n[i]){if(!c(o))return e;o=l(o.parentNode)}else{if(c(o)){if(void 0===o.data_of_thin)return e;o=o.data_of_thin}if(null===o)return null;o=o[n[i]]}return null==o?"":o});return n}function l(t){for(;!t.hasOwnProperty("data_of_thin");){if(null===t.parentNode)return null;t=t.parentNode}return t}function r(t){for(var e=t.path.split("/"),a=l(t.container),n=0;n<e.length;n++)if(".."===e[n]){if(!c(a))return null;a=l(a.parentNode)}else{if(c(a)){if(void 0===a.data_of_thin)return null;a=a.data_of_thin}if(null===a)return null;if(!(e[n]in a))return null;a=a[e[n]]}return a}function c(t){return!(!t||"undefined"==typeof window||t!==window&&!t.nodeType)}void 0===t.data&&(t.data={}),"[object Array]"===Object.prototype.toString.call(t.template)?e({container:this[0],template:t.template,data:t.data}):"[object Array]"===Object.prototype.toString.call(t.data)?e({container:this[0],template:t.template,data:t.data}):"[object Object]"===Object.prototype.toString.call(t.template)?e({container:this[0],template:t.template,data:t.data}):(this[0].data_of_thin=t.data,e({container:this[0],template:t.template}))}});var popDrag=function(t,e,a){var n={left:0,top:0,currentX:0,currentY:0,flag:!1,resetPosition:function(){var t=$(e).css("left"),a=$(e).css("top");"auto"!==t&&(this.left=t),"auto"!==a&&(this.top=a)}};n.resetPosition(),t.onmousedown=function(e){n.flag=!0,e||(e=window.event,t.onselectstart=function(){return!1});var a=e;n.currentX=a.clientX,n.currentY=a.clientY},document.onmouseup=function(){n.flag=!1,n.resetPosition()},document.onmousemove=function(t){var o=t||window.event;if(n.flag){var i=o.clientX,l=o.clientY,r=i-n.currentX,c=l-n.currentY;return e.style.left=parseInt(n.left)+r+"px",e.style.top=parseInt(n.top)+c+"px","function"==typeof a&&a((parseInt(n.left)||0)+r,(parseInt(n.top)||0)+c),t.preventDefault&&t.preventDefault(),!1}}};